<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>htmlwidgets中文教程</title>
  <meta name="description" content="这是一个htmlwidgets的中文教程">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="htmlwidgets中文教程" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="这是一个htmlwidgets的中文教程" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="htmlwidgets中文教程" />
  
  <meta name="twitter:description" content="这是一个htmlwidgets的中文教程" />
  

<meta name="author" content="徐静 译">


<meta name="date" content="2018-07-05">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="htmlwidgets-advanced.html">
<link rel="next" href="summary.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
<link rel="stylesheet" href="css\toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://github.com/DataXujing/htmlwidgets_CN" target='blank'>项目地址</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>声明</a></li>
<li class="chapter" data-level="" data-path="e5ba8fe8a880.html"><a href="e5ba8fe8a880.html"><i class="fa fa-check"></i>序言</a></li>
<li class="chapter" data-level="" data-path="e585b3e4ba8ee8af91e88085.html"><a href="e585b3e4ba8ee8af91e88085.html"><i class="fa fa-check"></i>关于译者</a></li>
<li class="chapter" data-level="1" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html"><i class="fa fa-check"></i><b>1</b> 简介</a><ul>
<li class="chapter" data-level="1.1" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.1"><i class="fa fa-check"></i><b>1.1</b> 概况</a></li>
<li class="chapter" data-level="1.2" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.2"><i class="fa fa-check"></i><b>1.2</b> 简单的开始</a></li>
<li class="chapter" data-level="1.3" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#sigma.js"><i class="fa fa-check"></i><b>1.3</b> 例子(sigma.js)</a><ul>
<li class="chapter" data-level="1.3.1" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 文件布局</a></li>
<li class="chapter" data-level="1.3.2" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.3.2"><i class="fa fa-check"></i><b>1.3.2</b> 依赖关系</a></li>
<li class="chapter" data-level="1.3.3" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#rr-binding"><i class="fa fa-check"></i><b>1.3.3</b> R绑定(R binding)</a></li>
<li class="chapter" data-level="1.3.4" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#javascriptjavascript-binding"><i class="fa fa-check"></i><b>1.3.4</b> JavaScript绑定(JavaScript binding)</a></li>
<li class="chapter" data-level="1.3.5" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.3.5"><i class="fa fa-check"></i><b>1.3.5</b> 演示</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#widgets"><i class="fa fa-check"></i><b>1.4</b> 创建你自己的widgets</a><ul>
<li class="chapter" data-level="1.4.1" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#requirements"><i class="fa fa-check"></i><b>1.4.1</b> 需求（Requirements）</a></li>
<li class="chapter" data-level="1.4.2" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#scaffolding"><i class="fa fa-check"></i><b>1.4.2</b> 脚手架（Scaffolding）</a></li>
<li class="chapter" data-level="1.4.3" data-path="htmlwidgets-intro.html"><a href="htmlwidgets-intro.html#section-1.4.3"><i class="fa fa-check"></i><b>1.4.3</b> 更多</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html"><i class="fa fa-check"></i><b>2</b> HTML空间尺寸调整</a><ul>
<li class="chapter" data-level="2.1" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 概述</a></li>
<li class="chapter" data-level="2.2" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 指定大小调整策略</a><ul>
<li class="chapter" data-level="2.2.1" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#-1"><i class="fa fa-check"></i><b>2.2.1</b> 例子</a></li>
<li class="chapter" data-level="2.2.2" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#section-2.2.2"><i class="fa fa-check"></i><b>2.2.2</b> 可用选项</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript调整大小方法</a><ul>
<li class="chapter" data-level="2.3.1" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#-2"><i class="fa fa-check"></i><b>2.3.1</b> 例子</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html"><i class="fa fa-check"></i><b>3</b> HTML控件：高级主题</a><ul>
<li class="chapter" data-level="3.1" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#section-3.1"><i class="fa fa-check"></i><b>3.1</b> 本节概述</a></li>
<li class="chapter" data-level="3.2" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#section-3.2"><i class="fa fa-check"></i><b>3.2</b> 数据变换</a><ul>
<li class="chapter" data-level="3.2.1" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#htmlwidgets.dataframetod3"><i class="fa fa-check"></i><b>3.2.1</b> HTMLWidgets.dataframeToD3()</a></li>
<li class="chapter" data-level="3.2.2" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#htmlwidgets.transposearray2d"><i class="fa fa-check"></i><b>3.2.2</b> HTMLWidgets.transposeArray2D()</a></li>
<li class="chapter" data-level="3.2.3" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#json"><i class="fa fa-check"></i><b>3.2.3</b> 自定义JSON串行化器</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="htmlwidgets-Sizing.html"><a href="htmlwidgets-Sizing.html#javascript"><i class="fa fa-check"></i><b>3.3</b> 传递JavaScript函数</a></li>
<li class="chapter" data-level="3.4" data-path="htmlwidgets-advanced.html"><a href="htmlwidgets-advanced.html#html"><i class="fa fa-check"></i><b>3.4</b> 自定义控件HTML</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html"><i class="fa fa-check"></i><b>4</b> htmlwidgets包中函数的总结</a><ul>
<li class="chapter" data-level="4.1" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#htmlwidgets"><i class="fa fa-check"></i><b>4.1</b> htmlwidgets包函数</a><ul>
<li class="chapter" data-level="4.1.1" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#htmlwidgets-package"><i class="fa fa-check"></i><b>4.1.1</b> htmlwidgets-package</a></li>
<li class="chapter" data-level="4.1.2" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#createwidget"><i class="fa fa-check"></i><b>4.1.2</b> createWidget</a></li>
<li class="chapter" data-level="4.1.3" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#getdependency"><i class="fa fa-check"></i><b>4.1.3</b> getDependency</a></li>
<li class="chapter" data-level="4.1.4" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#htmlwidgets-shiny"><i class="fa fa-check"></i><b>4.1.4</b> htmlwidgets-shiny</a></li>
<li class="chapter" data-level="4.1.5" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#js"><i class="fa fa-check"></i><b>4.1.5</b> JS</a></li>
<li class="chapter" data-level="4.1.6" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#onrender"><i class="fa fa-check"></i><b>4.1.6</b> onRender</a></li>
<li class="chapter" data-level="4.1.7" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#onstaticrendercomplete"><i class="fa fa-check"></i><b>4.1.7</b> onStaticRenderComplete</a></li>
<li class="chapter" data-level="4.1.8" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#prependcontent"><i class="fa fa-check"></i><b>4.1.8</b> prependContent</a></li>
<li class="chapter" data-level="4.1.9" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#savewidget"><i class="fa fa-check"></i><b>4.1.9</b> saveWidget</a></li>
<li class="chapter" data-level="4.1.10" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#scaffoldwidget"><i class="fa fa-check"></i><b>4.1.10</b> scaffoldWidget</a></li>
<li class="chapter" data-level="4.1.11" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#setwidgetidseed"><i class="fa fa-check"></i><b>4.1.11</b> setWidgetIdSeed</a></li>
<li class="chapter" data-level="4.1.12" data-path="htmlwidgets-pkgintro.html"><a href="htmlwidgets-pkgintro.html#sizingpolicy"><i class="fa fa-check"></i><b>4.1.12</b> sizingPolicy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>5</b> 总结</a></li>
<li class="chapter" data-level="6" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>6</b> 参考文献</a></li>
<li class="divider"></li>
<li><a href="https://dataxujing.github.io/" target="blank">个人主页</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">htmlwidgets中文教程</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="htmlwidgets-pkgintro" class="section level1">
<h1><span class="header-section-number">第 4 章</span> htmlwidgets包中函数的总结</h1>
<p>一个完整的R包提交到CRAN,都会有一个函数使用的说明文档或手册，<a href="https://cran.r-project.org/web/packages/htmlwidgets/htmlwidgets.pdf">htmlwidgets</a>也不例外,我们将按照原说明文档的函数顺序，翻译解释htmlwidgets包中函数的用途和参数设置。这其中有些方法我们在前三章中已经提到。</p>
<div id="htmlwidgets" class="section level2">
<h2><span class="header-section-number">4.1</span> htmlwidgets包函数</h2>
<div id="htmlwidgets-package" class="section level3">
<h3><span class="header-section-number">4.1.1</span> htmlwidgets-package</h3>
<p>使用R创建HTML控件的包的信息</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>htmlwidgets包提供了一个简单的创建R链接JavaScript包的框架，使用该框架创建控件可以：</p>
<ol style="list-style-type: decimal">
<li><p>在R控制台上使用JavaScript可视化库，就像绘图一样</p></li>
<li><p>在R Markdown文档和Shiny Web应用程序中嵌入控件</p></li>
<li><p>对保存网页，共享分析成果</p></li>
</ol>
<p>在R中可以参考下面文档(这些说明文档译者已经在前三章翻译)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vignette</span>(<span class="st">&quot;develop_intro&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;htmlwidgets&quot;</span>) <span class="co">#第一章</span>
<span class="kw">vignette</span>(<span class="st">&quot;develop_sizing&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;htmlwidgets&quot;</span>) <span class="co">#第二章</span>
<span class="kw">vignette</span>(<span class="st">&quot;develop_advanced&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;htmlwidgets&quot;</span>) <span class="co">#第三章</span></code></pre></div>
<p>包的源码地址：<a href="https://github.com/ramnathv/htmlwidgets" class="uri">https://github.com/ramnathv/htmlwidgets</a></p>
<blockquote>
<p><strong>作者</strong></p>
</blockquote>
<p>Ramnath Vaidyanathan, Joe Cheng, JJ Allaire, and Yihui Xie</p>
</div>
<div id="createwidget" class="section level3">
<h3><span class="header-section-number">4.1.2</span> createWidget</h3>
<p>创建HTML控件函数</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>基于控件的YAML文件和给定的JavaScript库创建一个HTML控件。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">createWidget</span>(name, x, <span class="dt">width =</span> <span class="ot">NULL</span>, <span class="dt">height =</span> <span class="ot">NULL</span>,
  <span class="dt">sizingPolicy =</span> htmlwidgets<span class="op">::</span><span class="kw">sizingPolicy</span>(), <span class="dt">package =</span> name,
  <span class="dt">dependencies =</span> <span class="ot">NULL</span>, <span class="dt">elementId =</span> <span class="ot">NULL</span>, <span class="dt">preRenderHook =</span> <span class="ot">NULL</span>)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>name: 控件名称(要和YAML和JS文档中的名称保持一致)</p>
<p>x: 传入控件的数据，要转化为JSON格式的数据。</p>
<p>width: 控件的宽度，默认值是NULL,默认会自适应调整宽度</p>
<p>height: 控件的高度，默认值是NULL,默认会自适应调整高度</p>
<p>sizingPoicy: 调整控件大小的策略，详见第二章</p>
<p>package: 定义控件所在的包（默认就是控件的名称）</p>
<p>dependencies: 控件额外的依赖(YAML文件定义之外)，特别是对于一些动态的依赖选项是有必要的</p>
<p>elementID: 使用控件的显示元素ID(而不是自动生成的元素ID) ,如果您有JavaScript与特定的实例控件交互这是很有必要的</p>
<p>preRenderHook: 一个运行在控件上的函数。</p>
<blockquote>
<p><strong>细节</strong></p>
</blockquote>
<p>更多细节可以参考第一章</p>
<blockquote>
<p><strong>值</strong></p>
</blockquote>
<p>htmlwidgets对象,这将在不同的上下文中智能地将自己打印到HTML中。 包括R控制台，在R Markdown文档中，以及在Shiny的输出绑定中。</p>
</div>
<div id="getdependency" class="section level3">
<h3><span class="header-section-number">4.1.3</span> getDependency</h3>
<p>获取htmlwidgets的JS和CSS依赖关系</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>获取htmlwidgets的JS和CSS依赖关系</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getDependency</span>(name, <span class="dt">package =</span> name)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>name: 控件的名称</p>
<p>package: 包的名称，默认是控件的名称</p>
</div>
<div id="htmlwidgets-shiny" class="section level3">
<h3><span class="header-section-number">4.1.4</span> htmlwidgets-shiny</h3>
<p>Shiny连接HTML控件</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>创建在Shiny中使用的output和render函数</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">shinyWidgetOutput</span>(outputId, name, width, height, <span class="dt">package =</span> name,
  <span class="dt">inline =</span> <span class="ot">FALSE</span>, <span class="dt">reportSize =</span> <span class="ot">FALSE</span>)
  
<span class="kw">shinyRenderWidget</span>(expr, outputFunction, env, quoted)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>outputId: 输出对应的ID</p>
<p>name: 控件创建的名称</p>
<p>width,height: 必须是有效的CSS单元(像：“100%”,“400px”,“auto”) 或者是数字</p>
<p>package: 包含控件的包</p>
<p>inline: 对输出使用一个行内的标签(<code>&lt;spqn&gt;</code>)</p>
<p>reportSize: 应该在Shiny的会话客户端数据中报告控件的容器大小吗？</p>
<p>expr: 一个产生HTML控件的而表达式</p>
<p>outputFunction: Shiny输出函数，与render函数对应</p>
<p>env: 在什么环境变量下计算expr</p>
<p>quoted: expr是引用的表达式（用quote()）吗？这是有用的，如果你想保存 变量中的表达式。</p>
<blockquote>
<p><strong>细节</strong></p>
</blockquote>
<p>这些功能放在控件内部，为Shiny创建控件和渲染控件所用，详细的可见下面的例子。</p>
<blockquote>
<p><strong>值</strong></p>
</blockquote>
<p>创建Shiny可用的output和render函数对</p>
<blockquote>
<p><strong>例子</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># shiny output binding for a widget named &#39;foo&#39;</span>
fooOutput &lt;-<span class="st"> </span><span class="cf">function</span>(outputId, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;400px&quot;</span>) {
    htmlwidgets<span class="op">::</span><span class="kw">shinyWidgetOutput</span>(outputId, <span class="st">&quot;foo&quot;</span>, width, height)
  }
  
<span class="co"># shiny render function for a widget named &#39;foo&#39;</span>
renderFoo &lt;-<span class="st"> </span><span class="cf">function</span>(expr, <span class="dt">env =</span> <span class="kw">parent.frame</span>(), <span class="dt">quoted =</span> <span class="ot">FALSE</span>) {
    <span class="cf">if</span> (<span class="op">!</span>quoted) { expr &lt;-<span class="st"> </span><span class="kw">substitute</span>(expr) } <span class="co"># force quoted</span>
    htmlwidgets<span class="op">::</span><span class="kw">shinyRenderWidget</span>(expr, fooOutput, env, <span class="dt">quoted =</span> <span class="ot">TRUE</span>)
  }</code></pre></div>
</div>
<div id="js" class="section level3">
<h3><span class="header-section-number">4.1.5</span> JS</h3>
<p>把R中的字符串转化成合法的JavaScript脚本</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>JS()函数把接受到的字符向量转化成客户端的JavaScript脚本</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">JS</span>(...)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>…: 一个字符串，字符串的内容就是JavaScript脚本</p>
<blockquote>
<p><strong>作者</strong></p>
</blockquote>
<p>Yihui Xie</p>
<blockquote>
<p><strong>例子</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(htmlwidgets)
<span class="kw">JS</span>(<span class="st">&#39;1 + 1&#39;</span>)
<span class="kw">list</span>(<span class="dt">x =</span> <span class="kw">JS</span>(<span class="st">&#39;function(foo) {return foo;}&#39;</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)
<span class="kw">JS</span>(<span class="st">&#39;function(x) {&#39;</span>, <span class="st">&#39;return x + 1;&#39;</span>, <span class="st">&#39;}&#39;</span>)</code></pre></div>
</div>
<div id="onrender" class="section level3">
<h3><span class="header-section-number">4.1.6</span> onRender</h3>
<p>渲染后执行自定义的JavaScript代码</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>使用这个函数来补充控件内置的JavaScript渲染逻辑 自定义JavaScript代码，只针对这个特定的控件对象。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">onRender</span>(x, jsCode, <span class="dt">data =</span> <span class="ot">NULL</span>)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>x: 一个HTML控件</p>
<p>jsCode: JS代码字符串</p>
<p>data: 传给JS的数据，转化为JSON数据</p>
<blockquote>
<p><strong>例如</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Not run:
<span class="kw">library</span>(leaflet)
<span class="co"># This example uses browser geolocation. RStudio users:</span>
<span class="co"># this won&#39;t work in the Viewer pane; try popping it</span>
<span class="co"># out into your system web browser.</span>
<span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">onRender</span>(<span class="st">&quot;</span>
<span class="st">  function(el, x) {</span>
<span class="st">    // Navigate the map to the user&#39;s location</span>
<span class="st">    this.locate({setView: true});</span>
<span class="st">    }</span>
<span class="st">    &quot;</span>)

<span class="co"># This example shows how you can make an R data frame available</span>
<span class="co"># to your JavaScript code.</span>

meh &lt;-<span class="st"> &quot;&amp;#x1F610;&quot;</span>;
yikes &lt;-<span class="st"> &quot;&amp;#x1F628;&quot;</span>;
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
        <span class="dt">lng =</span> quakes<span class="op">$</span>long,
        <span class="dt">lat =</span> quakes<span class="op">$</span>lat,
        <span class="dt">html =</span> <span class="kw">ifelse</span>(quakes<span class="op">$</span>mag <span class="op">&lt;</span><span class="st"> </span><span class="fl">5.5</span>, meh, yikes),
        <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>
        )

<span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">fitBounds</span>(<span class="kw">min</span>(df<span class="op">$</span>lng), <span class="kw">min</span>(df<span class="op">$</span>lat), <span class="kw">max</span>(df<span class="op">$</span>lng), <span class="kw">max</span>(df<span class="op">$</span>lat)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">onRender</span>(<span class="st">&quot;</span>
<span class="st">          function(el, x, data) {</span>
<span class="st">                for (var i = 0; i &lt; data.lng.length; i++) {</span>
<span class="st">                    var icon = L.divIcon({className: &#39;&#39;, html: data.html[i]});</span>
<span class="st">                    L.marker([data.lat[i], data.lng[i]], {icon: icon}).addTo(this);</span>
<span class="st">                    }</span>
<span class="st">                }</span>
<span class="st">          &quot;</span>, <span class="dt">data =</span> df)

## End(Not run)</code></pre></div>
</div>
<div id="onstaticrendercomplete" class="section level3">
<h3><span class="header-section-number">4.1.7</span> onStaticRenderComplete</h3>
<p>静态渲染后执行JavaScript代码</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>该机制是为运行代码定制控件实例而设计的，这是无法在页面加载时间完成的，因为控件实例还没有被创建。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">onStaticRenderComplete</span>(jsCode)</code></pre></div>
<blockquote>
<p><strong>值</strong></p>
</blockquote>
<p>创建了一个htmltools包中的tags$script对象</p>
<blockquote>
<p><strong>例子</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Not run:
<span class="kw">library</span>(leaflet)
<span class="kw">library</span>(htmltools)
<span class="kw">library</span>(htmlwidgets)

page &lt;-<span class="st"> </span><span class="kw">tagList</span>(
    <span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">addTiles</span>(),
    <span class="kw">onStaticRenderComplete</span>(
      <span class="st">&quot;HTMLWidgets.find(&#39;.leaflet&#39;).setZoom(4);&quot;</span>
        )
      )
      
<span class="kw">print</span>(page, <span class="dt">browse =</span> <span class="ot">TRUE</span>)

## End(Not run)</code></pre></div>
</div>
<div id="prependcontent" class="section level3">
<h3><span class="header-section-number">4.1.8</span> prependContent</h3>
<p>将附加HTML内容添加到控件中</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>使用这些函数将额外的HTML内容（主要是JavaScript和/或CSS样式）附加到 控件，用于在独立模式下进行渲染（即在R控制台上打印）或在knitr文档中进行渲染。 当在Shiny的控件渲染函数中运行时，这些函数不受支持，并且将 在该上下文中使用警告。允许多个调用，并且稍后的调用不会撤销以前调用的影响。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prependContent</span>(x, ...)
<span class="kw">appendContent</span>(x, ...)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>x: HTML标签对象</p>
<p>…: 有效的标签，文本或者HTML.或者是他们的一个列表</p>
<blockquote>
<p><strong>值</strong></p>
</blockquote>
<p>输出一个调整了的HTML控件</p>
</div>
<div id="savewidget" class="section level3">
<h3><span class="header-section-number">4.1.9</span> saveWidget</h3>
<p>把控件保存称HTML文件</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>把控件保存成HTML文件</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">saveWidget</span>(widget, file, <span class="dt">selfcontained =</span> <span class="ot">TRUE</span>, <span class="dt">libdir =</span> <span class="ot">NULL</span>,
  <span class="dt">background =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">title =</span> <span class="kw">class</span>(widget)[[<span class="dv">1</span>]], <span class="dt">knitrOptions =</span> <span class="kw">list</span>())</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>widget: 需要保存的控件</p>
<p>file: 保存的路径</p>
<p>selfcontained: 是否保存成一个自包含的HTML文档</p>
<p>libdir: HTML依赖的包的路径</p>
<p>background: HTML背景色</p>
<p>title: 产生主页的标题</p>
<p>knitrOptions: 一个knitr代码块的选项列表</p>
</div>
<div id="scaffoldwidget" class="section level3">
<h3><span class="header-section-number">4.1.10</span> scaffoldWidget</h3>
<p>为HTML控件创建实现脚手架</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>将一个HTML控件实现的最小代码添加到一个R包中。这个函数必须从要添加小部件的包的根目录中执行。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scaffoldWidget</span>(name, <span class="dt">bowerPkg =</span> <span class="ot">NULL</span>, <span class="dt">edit =</span> <span class="kw">interactive</span>())</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>name: 控件的名称</p>
<p>bowerPkg: 这个控件基于Bower包的可选名称。如果您指定这个参数然后Bower将被用来自动下载控件。源代码和依赖项，并将它们添加到小部件的YAML中。</p>
<p>edit: 在创建脚手架后，自动打开控件的JavaScript源文件。</p>
</div>
<div id="setwidgetidseed" class="section level3">
<h3><span class="header-section-number">4.1.11</span> setWidgetIdSeed</h3>
<p>为控件元素ID设置随机种子</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>设置用于生成控件元素ID的随机种子。调用这个函数而不是依赖 默认行为确保跨会话的稳定控件ID。</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setWidgetIdSeed</span>(seed, <span class="dt">kind =</span> <span class="ot">NULL</span>, <span class="dt">normal.kind =</span> <span class="ot">NULL</span>)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>seed: 一个值，整数或者为NULL</p>
<p>kind: character or NULL</p>
<p>normal.kind: character string or NULL.</p>
</div>
<div id="sizingpolicy" class="section level3">
<h3><span class="header-section-number">4.1.12</span> sizingPolicy</h3>
<p>创建一个空间大小调整策略</p>
<blockquote>
<p><strong>描述</strong></p>
</blockquote>
<p>Define the policy by which HTML widgets will be sized in various containers (e.g. Browser, RStudio Viewer, R Markdown, Shiny). Note that typically widgets can accept the default sizing policy (or override only one or two aspects of it) and get satisfactory sizing behavior via the automatic sizing logic built into the htmlwidgets framework (see the notes below for the most typical exceptions to this).</p>
<blockquote>
<p><strong>用法</strong></p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sizingPolicy</span>(<span class="dt">defaultWidth =</span> <span class="ot">NULL</span>, <span class="dt">defaultHeight =</span> <span class="ot">NULL</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>,
  <span class="dt">viewer.defaultWidth =</span> <span class="ot">NULL</span>, <span class="dt">viewer.defaultHeight =</span> <span class="ot">NULL</span>,
  <span class="dt">viewer.padding =</span> <span class="ot">NULL</span>, <span class="dt">viewer.fill =</span> <span class="ot">TRUE</span>, <span class="dt">viewer.suppress =</span> <span class="ot">FALSE</span>,
  <span class="dt">viewer.paneHeight =</span> <span class="ot">NULL</span>, <span class="dt">browser.defaultWidth =</span> <span class="ot">NULL</span>,
  <span class="dt">browser.defaultHeight =</span> <span class="ot">NULL</span>, <span class="dt">browser.padding =</span> <span class="ot">NULL</span>,
  <span class="dt">browser.fill =</span> <span class="ot">FALSE</span>, <span class="dt">browser.external =</span> <span class="ot">FALSE</span>,
  <span class="dt">knitr.defaultWidth =</span> <span class="ot">NULL</span>, <span class="dt">knitr.defaultHeight =</span> <span class="ot">NULL</span>,
  <span class="dt">knitr.figure =</span> <span class="ot">TRUE</span>)</code></pre></div>
<blockquote>
<p><strong>参数</strong></p>
</blockquote>
<p>defaultWidth: The default width used to display the widget. This parameter specifies the defaultwidth for viewing in all contexts (browser, viewer, and knitr) unless it is specifically overridden with e.g. browser.defaultWidth.</p>
<p>defaultHeight: The default height used to display the widget. This parameter specifies the default height for viewing in all contexts (browser, viewer, and knitr) unless it is specifically overridden with e.g. browser.defaultHeight</p>
<p>padding: Padding around the widget (in pixels). This parameter specifies the padding for viewing in all contexts (browser and viewer) unless it is specifically overriden by e.g. browser.padding.</p>
<p>viewer.defaultWidth: The default width used to display the widget within the RStudio Viewer</p>
<p>viewer.defaultHeight: The default height used to display the widget within the RStudio Viewer.</p>
<p>viewer.padding: Padding around the widget when displayed in the RStudio Viewer (defaults to 15 pixels).</p>
<p>viewer.fill: When displayed in the RStudio Viewer, automatically size the widget to the viewer dimensions (note that viewer.padding is still applied). Default to TRUE.</p>
<p>viewer.suppress: Never display the widget within the RStudio Viewer (useful for widgets that require a large amount of space for rendering). Defaults to FALSE.</p>
<p>viewer.paneHeight: Request that the RStudio Viewer be forced to a specific height when displaying this widget.</p>
<p>browser.defaultWidth: The default width used to display the widget within a standalone web browser.</p>
<p>browser.defaultHeight: The default height used to display the widget within a standalone web browser.</p>
<p>browser.padding: Padding around the widget when displayed in a standalone browser (defaults to 40 pixels).</p>
<p>browser.fill: When displayed in a standalone web browser, automatically size the widget tothe browser dimensions (note that browser.padding is still applied). Defaults to FALSE.</p>
<p>browser.external: When displaying in a browser, always use an external browser (via browseURL()). Defaults to FALSE, which will result in the use of an internal browser within RStudio v1.1 and higher.</p>
<p>knitr.defaultWidth: The default width used to display the widget within documents generated by knitr (e.g. R Markdown).</p>
<p>knitr.figure: Apply the default knitr fig.width and fig.height to the widget when it’s rendered within R Markdown documents. Defaults to TRUE.</p>
<blockquote>
<p><strong>细节</strong></p>
</blockquote>
<p>The default HTML widget sizing policy treats the widget with the same sizing semantics as an R plot. When printed at the R console the widget is displayed within the RStudio Viewer and sized to fill the Viewer pane (modulo any padding). When rendered inside an R Markdown document the widget is sized based on the default size of figures in the document.</p>
<p>You might need to change the default behavior if your widget is extremely large. In this case you might specify viewer.suppress = TRUE and knitr.figure = FALSE as well provide for a larger default width and height for knitr.</p>
<p>You also might need to change the default behavior if you widget already incorporates padding. Inthis case you might specify viewer.padding = 0. For additional details on widget sizing:vignette(“develop_sizing”, package = “htmlwidgets”)</p>
<p>相关细节可以参考第二章</p>
<blockquote>
<p><strong>值</strong></p>
</blockquote>
<p>一个控件大小的调整策略</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="htmlwidgets-advanced.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["htmlwidgets_cn.pdf", "htmlwidgets_cn.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
